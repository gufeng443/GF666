<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å·¥å…·åˆé›† - ä¸€ä½“åŒ–é¡µé¢</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; display: flex; flex-direction: column; }
        
        /* é¡¶éƒ¨å¯¼èˆª */
        .app-header { 
            background: rgba(255,255,255,0.98); 
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 20px rgba(0,0,0,0.1); 
            padding: 20px 24px;
            border-bottom: 2px solid #667eea;
        }
        .title { 
            font-size: 28px; 
            color: #667eea; 
            font-weight: 700; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .subtitle { font-size: 14px; color: #6b7280; margin-top: 8px; }

        /* æœç´¢å’Œç­›é€‰åŒº */
        .search-bar {
            background: white;
            padding: 12px 24px;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            gap: 12px;
            align-items: center;
        }
        .search-input {
            flex: 1;
            padding: 10px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s;
        }
        .search-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102,126,234,0.1);
        }
        .filter-btn {
            padding: 10px 20px;
            border: 2px solid #e5e7eb;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.2s;
            font-weight: 500;
        }
        .filter-btn:hover { background: #f3f4f6; }
        .filter-btn.active { 
            background: #667eea; 
            color: white; 
            border-color: #667eea; 
        }

        /* æ ‡ç­¾åŒºåŸŸ */
        .tabs { 
            display: flex; 
            flex-direction: column; 
            gap: 16px; 
            padding: 16px 24px; 
            background: rgba(255,255,255,0.95); 
            backdrop-filter: blur(10px);
            max-height: 280px;
            overflow-y: auto;
        }
        .tab-section { display: flex; flex-wrap: wrap; gap: 10px; }
        .tab-section-title { 
            font-size: 13px; 
            color: #374151; 
            font-weight: 700; 
            margin: 4px 0 8px 2px; 
            display: flex; 
            align-items: center; 
            gap: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .tab-section-title .icon { font-size: 16px; }
        
        /* æ ‡ç­¾æ ·å¼ä¼˜åŒ– */
        .tab { 
            padding: 12px 16px; 
            background: white;
            color: #374151; 
            border: 2px solid #e5e7eb; 
            border-radius: 10px; 
            cursor: pointer; 
            font-size: 13px; 
            font-weight: 500;
            transition: all .3s cubic-bezier(0.4, 0, 0.2, 1); 
            user-select: none; 
            display: inline-flex; 
            align-items: center; 
            gap: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            min-height: 42px;
            white-space: nowrap;
        }
        .tab:hover { 
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102,126,234,0.2);
            border-color: #667eea;
        }
        .tab.active { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white; 
            border-color: transparent; 
            box-shadow: 0 4px 16px rgba(102,126,234,.4);
            transform: translateY(-2px);
        }
        .tab.local { background: linear-gradient(135deg, #e0f2fe 0%, #dbeafe 100%); border-color: #bae6fd; }
        .tab.online { background: linear-gradient(135deg, #ffedd5 0%, #fed7aa 100%); border-color: #fdba74; }
        .tab.resource { background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%); border-color: #d8b4fe; }
        .tab.local:hover { border-color: #0ea5e9; }
        .tab.online:hover { border-color: #f97316; }
        .tab.resource:hover { border-color: #a855f7; }
        .tab.active.local,
        .tab.active.online,
        .tab.active.resource { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .badge { 
            font-size: 10px; 
            padding: 3px 8px; 
            border-radius: 999px; 
            background: rgba(0,0,0,0.05); 
            color: #374151;
            font-weight: 600;
        }
        .tab.active .badge { background: rgba(255,255,255,.25); color: white; }
        .info-dot { 
            width: 20px; 
            height: 20px; 
            display: inline-flex; 
            align-items: center; 
            justify-content: center; 
            border-radius: 999px; 
            background: rgba(0,0,0,0.08); 
            color: #374151; 
            font-weight: 700; 
            font-size: 11px;
            transition: all 0.2s;
        }
        .info-dot:hover { background: rgba(102,126,234,0.2); }
        .tab.active .info-dot { background: rgba(255,255,255,.25); color: #ffffff; }

        .content { flex: 1; display: flex; flex-direction: column; }
        .toolbar { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            padding: 12px 24px; 
            background: rgba(255,255,255,0.95); 
            backdrop-filter: blur(10px);
            border-bottom: 1px solid #e5e7eb; 
        }
        .current-label { 
            font-size: 14px; 
            color: #374151; 
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .current-label::before {
            content: 'â–¶';
            color: #667eea;
            font-size: 12px;
        }
        .actions-right { display: flex; gap: 10px; }
        .btn { 
            padding: 8px 16px; 
            font-size: 13px; 
            border-radius: 8px; 
            border: 2px solid #e5e7eb; 
            background: white; 
            color: #374151; 
            cursor: pointer; 
            transition: all .3s;
            font-weight: 500;
        }
        .btn:hover { 
            background: #f3f4f6; 
            border-color: #667eea;
            transform: translateY(-1px);
        }
        .btn.primary { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff; 
            border-color: transparent;
            box-shadow: 0 2px 8px rgba(102,126,234,0.3);
        }
        .btn.primary:hover { 
            box-shadow: 0 4px 12px rgba(102,126,234,0.4);
            transform: translateY(-2px);
        }
        .frame-wrap { 
            flex: 1; 
            padding: 16px 24px 24px 24px;
            background: rgba(255,255,255,0.1);
            display: flex;
            flex-direction: column;
        }
        .frame { 
            width: 100%; 
            flex: 1;
            min-height: 500px;
            border: none; 
            background: white; 
            border-radius: 16px; 
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
        }

        .footer { 
            text-align: center; 
            padding: 12px 24px; 
            font-size: 12px; 
            color: rgba(255,255,255,0.8); 
            background: rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }

        /* Modal */
        .modal-mask { 
            position: fixed; 
            inset: 0; 
            background: rgba(0,0,0,.6); 
            backdrop-filter: blur(4px);
            display: none; 
            align-items: center; 
            justify-content: center; 
            padding: 16px;
            z-index: 1000;
        }
        .modal { 
            width: min(900px, 96vw); 
            max-height: 90vh; 
            overflow: auto; 
            background: #fff; 
            border-radius: 16px; 
            box-shadow: 0 20px 60px rgba(0,0,0,.3);
            animation: modalSlideIn 0.3s ease-out;
        }
        @keyframes modalSlideIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .modal-header { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            padding: 20px 24px; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .modal-title { 
            font-size: 18px; 
            font-weight: 700; 
            color: white; 
        }
        .modal-header .btn {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
        }
        .modal-header .btn:hover {
            background: rgba(255,255,255,0.3);
            border-color: rgba(255,255,255,0.5);
            transform: none;
        }
        .modal-body { padding: 20px 24px 24px 24px; }
        .muted { color: #6b7280; font-size: 14px; line-height: 1.6; }
        .guide-section { margin-top: 16px; }
        .guide-section h4 { 
            font-size: 14px; 
            color: #667eea; 
            margin-bottom: 8px; 
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .guide-section h4::before {
            content: 'â—';
            font-size: 10px;
        }
        .guide-section ol { 
            padding-left: 20px; 
            color: #374151; 
            font-size: 14px; 
            line-height: 1.8; 
        }
        .guide-section ul { 
            padding-left: 20px; 
            color: #374151; 
            font-size: 14px; 
            line-height: 1.8; 
        }
        .guide-section li { margin-bottom: 6px; }
        .kbd { 
            padding: 3px 8px; 
            border: 2px solid #e5e7eb; 
            border-bottom-width: 3px; 
            border-radius: 6px; 
            background: linear-gradient(180deg, #ffffff 0%, #f3f4f6 100%);
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; 
            font-size: 12px;
            font-weight: 600;
            color: #667eea;
        }

        /* æ»šåŠ¨æ¡ç¾åŒ– */
        .tabs::-webkit-scrollbar,
        .modal::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        .tabs::-webkit-scrollbar-track,
        .modal::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }
        .tabs::-webkit-scrollbar-thumb,
        .modal::-webkit-scrollbar-thumb {
            background: #667eea;
            border-radius: 4px;
        }
        .tabs::-webkit-scrollbar-thumb:hover,
        .modal::-webkit-scrollbar-thumb:hover {
            background: #764ba2;
        }

        /* å·¥å…·æç¤º */
        .quick-tips {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            padding: 10px 24px;
            border-bottom: 1px solid #fbbf24;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 13px;
            color: #92400e;
        }
        .quick-tips strong {
            color: #78350f;
        }
        .quick-tips .close-tips {
            margin-left: auto;
            cursor: pointer;
            padding: 4px 8px;
            border-radius: 4px;
            transition: background 0.2s;
        }
        .quick-tips .close-tips:hover {
            background: rgba(0,0,0,0.1);
        }
        .quick-tips.hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .app-header { padding: 16px; }
            .title { font-size: 22px; }
            .subtitle { font-size: 12px; }
            .tabs { max-height: 200px; padding: 12px; }
            .tab { padding: 10px 12px; font-size: 12px; }
            .search-bar { flex-direction: column; }
            .filter-btn { padding: 8px 16px; }
            .toolbar { flex-direction: column; gap: 8px; align-items: flex-start; }
            .actions-right { width: 100%; justify-content: space-between; }
            .frame-wrap { padding: 12px; }
            .frame { min-height: 400px; }
            .quick-tips { font-size: 12px; padding: 8px 16px; }
        }
    </style>
</head>
<body>
    <div class="app-header">
        <div class="title">ğŸ› ï¸ å·¥å…·åˆé›†</div>
        <div class="subtitle">åœ¨ä¸€ä¸ªé¡µé¢ä¸­å¿«é€Ÿåˆ‡æ¢å¹¶ä½¿ç”¨å„å·¥å…· Â· æ™ºèƒ½æœç´¢ Â· åˆ†ç±»ç­›é€‰ Â· å¿«æ·å¯¼èˆª</div>
    </div>

    <div class="quick-tips" id="quickTips">
        <span>ğŸ’¡</span>
        <span><strong>å¿«é€Ÿæç¤ºï¼š</strong>ç‚¹å‡»å·¥å…·æ ‡ç­¾ä¸Šçš„ <span style="background: rgba(102,126,234,0.1); padding: 2px 6px; border-radius: 4px; font-weight: 600;">i</span> æŒ‰é’®æŸ¥çœ‹è¯¦ç»†ä½¿ç”¨æŒ‡å— Â· ä½¿ç”¨ <span style="background: rgba(102,126,234,0.1); padding: 2px 6px; border-radius: 4px; font-weight: 600;">â†/â†’</span> é”®åˆ‡æ¢å·¥å…·</span>
        <span class="close-tips" id="closeTips" title="å…³é—­æç¤º">âœ•</span>
    </div>

    <div class="search-bar">
        <input type="text" class="search-input" id="searchInput" placeholder="ğŸ” æœç´¢å·¥å…·åç§°æˆ–åŠŸèƒ½ï¼ˆæ”¯æŒå®æ—¶æœç´¢ï¼‰..." />
        <button class="filter-btn active" data-filter="all">å…¨éƒ¨ ğŸ“‹</button>
        <button class="filter-btn" data-filter="æœ¬åœ°">æœ¬åœ° ğŸ’»</button>
        <button class="filter-btn" data-filter="åœ¨çº¿">åœ¨çº¿ ğŸŒ</button>
        <button class="filter-btn" data-filter="èµ„æº">èµ„æº ğŸ“</button>
    </div>

    <div class="tabs" id="tabs"></div>

    <div class="content">
        <div class="toolbar">
            <div class="current-label" id="currentLabel">â€”</div>
            <div class="actions-right">
                <button class="btn" id="openNew">æ‰“å¼€æ–°çª—å£</button>
                <button class="btn" id="reload">åˆ·æ–°</button>
                <button class="btn primary" id="openGuide">ä½¿ç”¨æŒ‡å—</button>
            </div>
        </div>
        <div class="frame-wrap">
            <iframe id="toolFrame" class="frame" src="" referrerpolicy="no-referrer"></iframe>
        </div>
    </div>

    <div class="footer">Â© å·¥å…·åˆé›†</div>

    <!-- Modal: ä½¿ç”¨æŒ‡å— -->
    <div class="modal-mask" id="guideMask" role="dialog" aria-modal="true" aria-hidden="true">
        <div class="modal" role="document">
            <div class="modal-header">
                <div class="modal-title" id="guideTitle">ä½¿ç”¨æŒ‡å—</div>
                <button class="btn" id="closeGuide">å…³é—­</button>
            </div>
            <div class="modal-body" id="guideBody"></div>
        </div>
    </div>

    <script>
        // å·¥å…·æ¸…å•ï¼šæ›´è§„èŒƒçš„å‘½å + åŠŸèƒ½ç‚¹ + æ“ä½œæ­¥éª¤
        // featuresï¼šç”¨äºåœ¨æŒ‡å—ä¸­å±•ç¤º"ä¸»è¦åŠŸèƒ½"
        const tools = [
            {
                label: 'ä½™æ–™è¿‡æ»¤ä¸å¯¹ç…§å¯¼å‡º',
                file: '818æ™®ç¾¤ä½™æ–™å¯¼å‡ºè¡¥å……æ–¹æ¡ˆ.html',
                type: 'æœ¬åœ°',
                icon: 'ğŸ”',
                desc: 'å¯¹"å®Œæ•´æ•°æ®"å’Œ"éœ€è¦è¿‡æ»¤çš„æ•°æ®"è¿›è¡Œæ¯”å¯¹ï¼Œå¯¼å‡ºå·®é›†ä¸ç‰¹æ®Šèµ„æºé›†åˆï¼Œå¸¦è¿›åº¦ä¸ç»Ÿè®¡é¢æ¿ã€‚',
                features: [
                    'æ”¯æŒæ‹–æ‹½/å¤šæ–‡ä»¶ï¼›è‡ªåŠ¨åˆå¹¶å…¨éƒ¨æ–‡ä»¶',
                    'æŒ‰è¡Œå»ç©ºç™½ã€ç»Ÿä¸€æ¢è¡Œï¼Œæ€§èƒ½ä¼˜åŒ–ï¼ˆSet å»é‡/è¿‡æ»¤ï¼‰',
                    'å¯¼å‡ºä¸¤ç±»ç»“æœï¼šè¿‡æ»¤åæ•°æ®ã€ç‰¹æ®Šèµ„æºæ•°æ®',
                    'ç»“æœç»Ÿè®¡ï¼ˆæ€»æ–‡ä»¶æ•°ã€è¡Œæ•°ã€ç¤ºä¾‹é¢„è§ˆã€å¤„ç†æ—¥å¿—ï¼‰'
                ],
                steps: [
                    'åœ¨"å®Œæ•´æ•°æ®åŒºåŸŸ"æ‹–å…¥ä¸€æ‰¹å®Œæ•´æ•°æ® TXT æ–‡ä»¶',
                    'åœ¨"è¿‡æ»¤æ•°æ®åŒºåŸŸ"æ‹–å…¥éœ€è¦æ’é™¤çš„ TXTï¼ˆå«"éšç§èµ„æº/æœªæ³¨å†Œèµ„æº"ä¼šè‡ªåŠ¨å½’ç±»ï¼‰',
                    'ç‚¹å‡»"å¤„ç†æ•°æ®"ï¼ŒæŸ¥çœ‹ç»Ÿè®¡ä¸æ—¥å¿—',
                    'æŒ‰éœ€ç‚¹å‡»"å¯¼å‡ºè¿‡æ»¤åæ•°æ®"æˆ–"å¯¼å‡ºç‰¹æ®Šèµ„æºæ•°æ®"'
                ]
            },
            {
                label: 'TXT ç¾¤å/ç®¡ç†/æ–™å­æå–',
                file: 'TXT æ–‡ä»¶è™•ç†å·¥å…·.html',
                type: 'æœ¬åœ°',
                icon: 'ğŸ“',
                desc: 'å¯¹å¾®ä¿¡ç¾¤/QQç¾¤å¯¼å‡ºçš„ TXT æ–‡æœ¬è¿›è¡Œç»“æ„åŒ–è§£æï¼Œåˆ†åˆ«æå–ç¾¤åç§°ã€ç®¡ç†å‘˜ã€æ–™å­ä¸‰ç±»æ•°æ®å¹¶ç”Ÿæˆä¸‹è½½ã€‚',
                features: [
                    'æ‹–æ‹½å•æ–‡ä»¶ï¼Œè‡ªåŠ¨è¯»å–å¹¶è§£æ',
                    'å¯åˆ†åˆ«ä¸‹è½½"ç¾¤åç¨±.txt / ç®¡ç†.txt / æ–™å­.txt"',
                    'ç•Œé¢ç®€æ´ï¼ŒçŠ¶æ€æç¤ºæ¸…æ™°'
                ],
                steps: [
                    'å°† TXT æ–‡ä»¶æ‹–å…¥é¡µé¢ä¸­å¤®åŒºåŸŸ',
                    'ç­‰å¾…è§£æå®Œæˆåï¼Œé¡µé¢ç”Ÿæˆ 3 ä¸ªä¸‹è½½æŒ‰é’®',
                    'ç‚¹å‡»å¯¹åº”æŒ‰é’®å³å¯åˆ†åˆ«ä¸‹è½½ç»“æœ'
                ]
            },
            {
                label: 'WhatsApp æ·»åŠ ç»Ÿè®¡ï¼ˆå•æ–‡ä»¶ï¼‰',
                file: 'WhatsApp.html',
                type: 'æœ¬åœ°',
                icon: 'ğŸ’¬',
                desc: 'å¯¹å•ä»½ WhatsApp èŠå¤©è®°å½•è¿›è¡Œ"æ·»åŠ æˆå‘˜"ç»Ÿè®¡ï¼Œå±•ç¤ºæ€»æ¬¡æ•°/å”¯ä¸€å·ç /Top æ·»åŠ è€…ï¼Œå¹¶å¯å¯¼å‡º CSVã€‚',
                features: [
                    'æ‰‹åŠ¨ç²˜è´´æˆ–ä¸Šä¼  TXT èŠå¤©è®°å½•',
                    'æ­£åˆ™è§£æ"+åŒºå· å·ç  æ·»åŠ äº†â€¦"æ ¼å¼',
                    'è¡¨æ ¼æ”¯æŒæ’åºï¼›ç»“æœå¯å¯¼å‡º CSV',
                    'è¿›åº¦æ¡ä¸æ¶ˆæ¯é€šçŸ¥'
                ],
                steps: [
                    'ç²˜è´´èŠå¤©è®°å½•æˆ–ä¸Šä¼  TXT æ–‡ä»¶',
                    'ç‚¹å‡»"åˆ†ææ•°æ®"å¹¶ç­‰å¾…è¿›åº¦å®Œæˆ',
                    'åœ¨"æ·»åŠ æˆå‘˜ç»Ÿè®¡"è¡¨æŸ¥çœ‹/æ’åº',
                    'å¦‚éœ€ç•™å­˜ï¼Œç‚¹å‡»"å¯¼å‡ºç»Ÿè®¡ç»“æœ"'
                ]
            },
            {
                label: 'WhatsApp æ·»åŠ ç»Ÿè®¡ï¼ˆæ‰¹é‡ï¼‰',
                file: 'WhatsAppç¾¤ç»„æˆå‘˜æ·»åŠ åˆ†æå·¥å…·.html',
                type: 'æœ¬åœ°',
                icon: 'ğŸ’¬',
                desc: 'åŒæ—¶æ”¯æŒå®‰å“ä¸ iOS å¯¼å‡ºçš„ç¾¤è®°å½•ï¼Œå¤šæ–‡ä»¶æ‰¹é‡å¯¼å…¥ï¼Œäº¦å¯æ•´åˆå¤šä»½ CSV ç»Ÿè®¡ã€‚',
                features: [
                    'TXT æ‰¹é‡å¯¼å…¥ï¼Œå»é™¤ä¸å¯è§æ§åˆ¶ç¬¦å¹¶é²æ£’è§£æ',
                    'CSV æ‰¹é‡æ•´åˆæ·»åŠ æ¬¡æ•°å¹¶æ±‡æ€»',
                    'è¿›åº¦ä¸æ¯æ–‡ä»¶çŠ¶æ€æ ‡è®°ï¼Œç»Ÿè®¡é¢æ¿ä¸å¯æ’åºè¡¨æ ¼',
                    'å¯¼å‡ºæ±‡æ€» CSV'
                ],
                steps: [
                    'åœ¨"èŠå¤©è®°å½•åˆ†æ"ä¸­æ‹–å…¥å¤šä»½ TXTï¼ˆæˆ–ç‚¹å‡»é€‰æ‹©ï¼‰',
                    'å¦‚éœ€æ•´åˆæ—¢æœ‰ç»Ÿè®¡ï¼Œåˆ‡æ¢åˆ°"CSV æ•°æ®æ•´åˆ"å¹¶å¯¼å…¥ CSV',
                    'ç‚¹å‡»å¯¹åº”æŒ‰é’®æ‰§è¡Œåˆ†æ/æ•´åˆï¼ŒæŸ¥çœ‹ç»Ÿè®¡ç»“æœ',
                    'æŒ‰éœ€å¯¼å‡ºæ±‡æ€» CSV'
                ]
            },
            {
                label: 'WhatsApp ç¾¤ç»„é“¾æ¥æ¸…ç†',
                file: 'é“¾æ¥æ¸…ç†.html',
                type: 'æœ¬åœ°',
                icon: 'ğŸ”—',
                desc: 'WhatsAppç¾¤ç»„ä¿¡æ¯è·å–å·¥å…·ï¼Œæ”¯æŒé“¾æ¥æ¸…ç†ã€æ•´åˆæ•°æ®ã€æ‰¹é‡è·å–ç¾¤ç»„åç§°ç­‰åŠŸèƒ½ã€‚',
                features: [
                    'è‡ªåŠ¨æ¸…ç†å’ŒéªŒè¯WhatsAppç¾¤ç»„é“¾æ¥æ ¼å¼',
                    'æ•´åˆç¤¾ç¾¤é“¾æ¥å’Œæ–™å­åç§°',
                    'æ‰¹é‡è·å–ç¾¤ç»„ä¿¡æ¯ï¼ˆéœ€åç«¯æœåŠ¡æ”¯æŒï¼‰',
                    'è¿›åº¦æ˜¾ç¤ºä¸é”™è¯¯å¤„ç†'
                ],
                steps: [
                    'åœ¨"ç¤¾ç¾¤é“¾æ¥"åŒºåŸŸç²˜è´´WhatsAppç¾¤ç»„é“¾æ¥',
                    'åœ¨"æ–™å­å"åŒºåŸŸè¾“å…¥å¯¹åº”åç§°',
                    'ç‚¹å‡»"æ•´åˆæ•°æ®"è‡ªåŠ¨åŒ¹é…é“¾æ¥å’Œåç§°',
                    'å¯é€‰ï¼šç‚¹å‡»"è·å–ç¾¤ç»„ä¿¡æ¯"æ‰¹é‡è·å–ç¾¤å'
                ]
            },
            {
                label: 'å·ç è¿‡æ»¤å™¨',
                file: 'åè®®å·å·ç è¿‡æ»¤.html',
                type: 'æœ¬åœ°',
                icon: 'ğŸ¯',
                desc: 'å¯¼å…¥ä¸€ä»½åŸå§‹æ–‡æœ¬ï¼Œè¾“å…¥éœ€å±è”½çš„å·ç ï¼ˆé€è¡Œï¼‰ï¼Œè¾“å‡ºè¿‡æ»¤åæ–‡æœ¬ä¸è¢«è¿‡æ»¤æ–‡æœ¬ã€‚',
                features: [
                    'æ‹–æ‹½/ç‚¹å‡»ä¸Šä¼  TXT/CSV/LOG',
                    'æ”¯æŒåœ¨æ–‡æœ¬æ¡†ä¸­ç²˜è´´å¤šä¸ªå…³é”®å·ç è¿›è¡Œè¿‡æ»¤',
                    'ç”Ÿæˆä¸¤ä»½ç»“æœå¹¶å¯åˆ†åˆ«ä¸‹è½½',
                    'ç»Ÿè®¡åŸå§‹/è¿‡æ»¤å/è¢«è¿‡æ»¤è¡Œæ•°'
                ],
                steps: [
                    'ä¸Šä¼ åŸå§‹æ•°æ®æ–‡ä»¶',
                    'åœ¨"éœ€è¦è¿‡æ»¤çš„æ•°æ®"ä¸­ç²˜è´´æ¯è¡Œä¸€ä¸ªçš„å·ç å…³é”®å­—',
                    'ç‚¹å‡»"æ‰§è¡Œè¿‡æ»¤"ï¼ŒæŸ¥çœ‹ç»Ÿè®¡ä¸ç»“æœ',
                    'ç‚¹å‡»æŒ‰é’®åˆ†åˆ«ä¸‹è½½ä¸¤ä»½ç»“æœ'
                ]
            },
            {
                label: 'TXT è¿‡æ»¤ + å·ç æå–',
                file: 'åè®®å·è¿‡æ»¤+å·ç å¯¼å‡º.HTML',
                type: 'æœ¬åœ°',
                icon: 'ğŸ“²',
                desc: 'å¯¹ TXT æ¯è¡Œè¿›è¡Œé¦–æ®µå·ç æå–ï¼Œå¹¶æŒ‰"91 å¼€å¤´/å…¶ä»–"åˆ†æµï¼Œæ”¯æŒåˆ†åˆ«ä¸‹è½½ä¸‰ç±»ç»“æœã€‚',
                features: [
                    'æå–æ¯è¡Œç¬¬ä¸€ä¸ªé€—å·å‰çš„å·ç ',
                    'åˆ†ç±»ç»Ÿè®¡ï¼šä»¥ 91 å¼€å¤´ / å…¶ä»– / å·ç æ¸…å•',
                    'é¢„è§ˆå‰ 10 è¡Œï¼Œé”™è¯¯æç¤ºå‹å¥½',
                    'ä¸‰ç±»ä¸‹è½½ï¼š91ã€å…¶ä»–ã€å·ç '
                ],
                steps: [
                    'ä¸Šä¼  TXT æ–‡ä»¶',
                    'ç­‰å¾…è§£æå¹¶æŸ¥çœ‹ç»Ÿè®¡ä¸é¢„è§ˆ',
                    'æ ¹æ®éœ€è¦ä¸‹è½½å„ç±»ç»“æœæ–‡ä»¶'
                ]
            },
            {
                label: 'TXT å¤šæ–‡ä»¶åˆå¹¶ä¸åˆ†åŒ…',
                file: 'å¤šåŒ…åˆå¹¶ä¸åŠ¨æ€åˆ†åŒ….html',
                type: 'æœ¬åœ°',
                icon: 'ğŸ“¦',
                desc: 'åˆå¹¶å¤šä»½ TXT å¹¶è‡ªåŠ¨å»é‡ï¼›æŒ‰è‡ªå®šä¹‰çš„å¤šæ¡£è¡Œæ•°é¡ºåºè¿›è¡Œåˆ†åŒ…ï¼Œå‰©ä½™è¡Œæ•°è‡ªåŠ¨ç”Ÿæˆæœ€åä¸€åŒ…ã€‚',
                features: [
                    'å¤šæ–‡ä»¶æ‹–æ‹½å¯¼å…¥ä¸æ–‡ä»¶åˆ—è¡¨',
                    'åˆå¹¶å»é‡ä¸æ•°é‡ç»Ÿè®¡ï¼ˆæ€»è¡Œ/å»é‡/é‡å¤/åŒ…æ•°ï¼‰',
                    'åˆ†åŒ…è®¡åˆ’é¢„è§ˆä¸ä¸€é”®ä¸‹è½½æ¯ä¸ªåŒ…',
                    'é‡ç½®ä¸çŠ¶æ€æç¤º'
                ],
                steps: [
                    'æ‹–å…¥å¤šä»½ TXT æ–‡ä»¶',
                    'åœ¨è¾“å…¥æ¡†å¡«å†™å¤šä¸ªåˆ†åŒ…è¡Œæ•°ï¼ˆå¦‚ï¼š100,110,150ï¼‰',
                    'ç‚¹å‡»"æ‰§è¡Œåˆ†åŒ…"ï¼ŒæŸ¥çœ‹è®¡åˆ’ä¸ç»“æœ',
                    'ç‚¹å‡»åˆ†åŒ…å¡ç‰‡ä¸‹è½½å¯¹åº” TXT'
                ]
            },
            {
                label: 'æ‹‰ç¾¤äººæ•°ç»Ÿè®¡æŠ¥è¡¨',
                file: 'å·¥å•ç»Ÿè®¡.html',
                type: 'æœ¬åœ°',
                icon: 'ğŸ“Š',
                desc: 'å¯¹æ‹‰ç¾¤å·¥å•æ•°æ®è¿›è¡Œç»Ÿè®¡åˆ†æï¼ŒæŒ‰æ—¥æœŸåˆ†ç»„æ˜¾ç¤ºäººæ•°å’Œæ”¶å…¥ï¼Œæ”¯æŒå¯¼å‡ºExcelæŠ¥è¡¨ã€‚',
                features: [
                    'æ”¯æŒæ‹–æ‹½TXTæ–‡ä»¶æˆ–ç²˜è´´æ•°æ®',
                    'æŒ‰æ—¥æœŸè‡ªåŠ¨åˆ†ç»„ç»Ÿè®¡',
                    'è®¡ç®—æ€»äººæ•°å’Œæ€»æ”¶å…¥ï¼ˆäººæ•° Ã— 0.05ï¼‰',
                    'é¢œè‰²åŒºåˆ†ä¸åŒæ—¥æœŸï¼Œå¯æ˜¾ç¤º/éšè—è¯¦ç»†ä¿¡æ¯',
                    'å¯¼å‡ºExcelæŠ¥è¡¨'
                ],
                steps: [
                    'æ‹–æ‹½TXTæ–‡ä»¶æˆ–åœ¨æ–‡æœ¬æ¡†ç²˜è´´å·¥å•æ•°æ®',
                    'ç‚¹å‡»"å¤„ç†æ•°æ®"è¿›è¡Œç»Ÿè®¡åˆ†æ',
                    'æŸ¥çœ‹æŒ‰æ—¥æœŸåˆ†ç»„çš„ç»Ÿè®¡ç»“æœ',
                    'å¯é€‰ï¼šç‚¹å‡»"å¯¼å‡ºä¸ºExcel"ä¿å­˜æŠ¥è¡¨'
                ]
            },
            // çº¿ä¸Šå·¥å…·ï¼ˆGitHub Pagesï¼‰
            { label: 'WhatsApp æ·»åŠ ç»Ÿè®¡', url: 'https://gufeng443.github.io/GF666/WhatsApp.html', type: 'åœ¨çº¿', icon: 'ğŸŒ', desc: 'åœ¨çº¿ç‰ˆæ·»åŠ ç»Ÿè®¡é¡µé¢ï¼Œä¸æœ¬åœ°ç‰ˆåŠŸèƒ½ç›¸è¿‘ï¼Œä¾¿äºå¿«é€Ÿè®¿é—®ã€‚', features: [ 'ç½‘é¡µå³ç”¨ï¼Œæ— éœ€ä¸‹è½½', 'å¯¼å…¥ TXT å¹¶å¯¼å‡º CSV' ], steps: [ 'ç‚¹å‡»æ‰“å¼€ç½‘é¡µ', 'æŒ‰é¡µé¢æç¤ºå¯¼å…¥å¹¶ç»Ÿè®¡' ] },
            { label: 'LJFP å·¥å…·', url: 'https://gufeng443.github.io/GF666/LJFP.html', type: 'åœ¨çº¿', icon: 'ğŸ”§', desc: 'åœ¨çº¿å·¥å…· LJFPã€‚', features: [ 'ç½‘é¡µå³ç”¨' ], steps: [ 'æ‰“å¼€ç½‘é¡µå¹¶æŒ‰æç¤ºæ“ä½œ' ] },
            { label: 'æ•´ç»„æ–™å­åˆ†åŒ… ğŸ”’', url: 'https://gufeng443.github.io/GF666/FB.html', type: 'åœ¨çº¿', icon: 'ğŸ“¦', desc: 'æ•´ç»„æ–™å­åˆ†åŒ…ï¼ˆå—å¯†ç ä¿æŠ¤ï¼š2233ï¼‰ã€‚', features: [ 'è¾“å…¥å£ä»¤åä½¿ç”¨' ], steps: [ 'æ‰“å¼€ç½‘é¡µè¾“å…¥å¯†ç  2233', 'æ ¹æ®é¡µé¢æç¤ºå®Œæˆåˆ†åŒ…å¯¼å‡º' ] },
            { label: 'åè®®å·åˆ†å·æ®µ ğŸ”’', url: 'https://gufeng443.github.io/GF666/FHD.html', type: 'åœ¨çº¿', icon: 'ğŸ“', desc: 'æŒ‰å·æ®µæ‰“åŒ…åè®®å·ï¼ˆå—å¯†ç ä¿æŠ¤ï¼š955ï¼‰ã€‚', features: [ 'è¾“å…¥å£ä»¤åé€‰æ‹©å·æ®µ' ], steps: [ 'æ‰“å¼€ç½‘é¡µè¾“å…¥å¯†ç  955', 'é€‰æ‹©å·æ®µå¹¶å¯¼å‡º' ] },
            { label: 'VCF è½¬æ¢å·¥å…·', url: 'https://gufeng443.github.io/GF666/VCF.html', type: 'åœ¨çº¿', icon: 'ğŸ‘¤', desc: 'å°†å·ç è½¬æ¢ä¸º VCF è”ç³»äººæ ¼å¼ã€‚', features: [ 'å¯¼å…¥å·ç ', 'è®¾ç½®è”ç³»äººå­—æ®µ', 'å¯¼å‡º VCF' ], steps: [ 'æ‰“å¼€ç½‘é¡µ', 'å¯¼å…¥å¹¶å¯¼å‡º' ] },
            { label: 'é€šç”¨å·¥å…·1', url: 'https://gufeng443.github.io/GF666/1.html', type: 'åœ¨çº¿', icon: 'âš™ï¸', desc: 'åœ¨çº¿å·¥å…· 1ã€‚', features: [ 'ç½‘é¡µå³ç”¨' ], steps: [ 'æ‰“å¼€ç½‘é¡µä½¿ç”¨' ] },
            { label: 'ç¾å›½æ—¶é—´æŸ¥è¯¢', url: 'https://gufeng443.github.io/GF666/ç¾å›½æ—¶é—´.html', type: 'åœ¨çº¿', icon: 'ğŸ•', desc: 'æŸ¥çœ‹ç¾å›½å½“å‰æ—¶é—´ã€‚', features: [ 'å¤šæ—¶åŒºæ˜¾ç¤ºï¼ˆç”±ç½‘é¡µå®ç°ï¼‰' ], steps: [ 'æ‰“å¼€ç½‘é¡µæŸ¥çœ‹' ] },
            { label: 'mm.txt èµ„æº', url: 'https://gufeng443.github.io/GF666/mm.txt', type: 'èµ„æº', icon: 'ğŸ“„', desc: 'çº¯æ–‡æœ¬èµ„æºæ–‡ä»¶ã€‚', features: [ 'å¯åœ¨çº¿é¢„è§ˆæˆ–ä¸‹è½½' ], steps: [ 'ç‚¹å‡»æ‰“å¼€æˆ–å¦å­˜ä¸º' ] }
        ];

        const tabsEl = document.getElementById('tabs');
        const frameEl = document.getElementById('toolFrame');
        const currentLabelEl = document.getElementById('currentLabel');
        const openNewBtn = document.getElementById('openNew');
        const reloadBtn = document.getElementById('reload');
        const openGuideBtn = document.getElementById('openGuide');
        const guideMask = document.getElementById('guideMask');
        const guideBody = document.getElementById('guideBody');
        const guideTitle = document.getElementById('guideTitle');
        const closeGuideBtn = document.getElementById('closeGuide');
        const searchInput = document.getElementById('searchInput');
        const filterBtns = document.querySelectorAll('.filter-btn');
        const quickTips = document.getElementById('quickTips');
        const closeTipsBtn = document.getElementById('closeTips');

        let currentIndex = 0;
        let currentFilter = 'all';
        let searchQuery = '';
        
        // å…³é—­å¿«é€Ÿæç¤º
        if (closeTipsBtn) {
            closeTipsBtn.addEventListener('click', () => {
                quickTips.classList.add('hidden');
                localStorage.setItem('hideTips', 'true');
            });
        }
        
        // æ£€æŸ¥æ˜¯å¦å·²éšè—æç¤º
        if (localStorage.getItem('hideTips') === 'true') {
            quickTips.classList.add('hidden');
        }

        function renderGuide(index) {
            const t = tools[index];
            guideTitle.textContent = `${t.label} Â· ä½¿ç”¨æŒ‡å—`;
            const lines = [];
            lines.push(`<div class=\"muted\">ç±»å‹ï¼š${t.type}${t.file ? ` Â· æœ¬åœ°æ–‡ä»¶ï¼š${t.file}` : t.url ? ` Â· é“¾æ¥ï¼š${t.url}` : ''}</div>`);
            if (t.desc) {
                lines.push(`<div class=\"guide-section\"><h4>åŠŸèƒ½è¯´æ˜</h4><div class=\"muted\">${t.desc}</div></div>`);
            }
            if (Array.isArray(t.features) && t.features.length) {
                const featuresHtml = t.features.map(f => `<li>${f}</li>`).join('');
                lines.push(`<div class=\"guide-section\"><h4>ä¸»è¦åŠŸèƒ½</h4><ul>${featuresHtml}</ul></div>`);
            }
            if (Array.isArray(t.steps) && t.steps.length) {
                const stepsHtml = t.steps.map(s => `<li>${s}</li>`).join('');
                lines.push(`<div class=\"guide-section\"><h4>æ“ä½œæ­¥éª¤</h4><ol>${stepsHtml}</ol></div>`);
            }
            lines.push(`<div class=\"guide-section\"><h4>å¿«æ·é”®</h4><ul><li><span class=\"kbd\">â†</span>/<span class=\"kbd\">â†’</span> åˆ‡æ¢å·¥å…·</li><li><span class=\"kbd\">?</span> æˆ– <span class=\"kbd\">Ctrl</span> + <span class=\"kbd\">/</span> æ‰“å¼€/å…³é—­æŒ‡å—</li></ul></div>`);
            guideBody.innerHTML = lines.join('');
        }

        function openGuide(index) {
            renderGuide(index);
            guideMask.style.display = 'flex';
            guideMask.setAttribute('aria-hidden', 'false');
        }
        function closeGuide() {
            guideMask.style.display = 'none';
            guideMask.setAttribute('aria-hidden', 'true');
        }

        function setActive(index) {
            currentIndex = index;
            const allTabs = Array.from(document.querySelectorAll('.tab[data-index]'));
            allTabs.forEach((el) => { 
                const elIndex = parseInt(el.getAttribute('data-index'));
                if (elIndex === index) el.classList.add('active'); 
                else el.classList.remove('active'); 
            });
            const tool = tools[index];
            const src = tool.file ? tool.file : tool.url;
            frameEl.src = src;
            document.title = `å·¥å…·åˆé›† - ${tool.label}`;
            currentLabelEl.textContent = `${tool.icon || ''} ${tool.label}`;
            openNewBtn.onclick = () => window.open(src, '_blank');
            reloadBtn.onclick = () => { try { frameEl.contentWindow.location.reload(); } catch (e) { frameEl.src = src; } };
            openGuideBtn.onclick = () => openGuide(index);
            
            // é¦–æ¬¡è®¿é—®æ—¶æ˜¾ç¤ºä½¿ç”¨æŒ‡å—
            const hasVisited = localStorage.getItem('toolsVisited');
            if (!hasVisited) {
                setTimeout(() => openGuide(index), 500);
                localStorage.setItem('toolsVisited', 'true');
            }
        }

        // è¿‡æ»¤å·¥å…·åˆ—è¡¨
        function getFilteredTools() {
            return tools.filter(tool => {
                // ç±»å‹ç­›é€‰
                if (currentFilter !== 'all' && tool.type !== currentFilter) return false;
                
                // æœç´¢ç­›é€‰
                if (searchQuery) {
                    const query = searchQuery.toLowerCase();
                    const matchLabel = tool.label.toLowerCase().includes(query);
                    const matchDesc = tool.desc && tool.desc.toLowerCase().includes(query);
                    const matchFeatures = tool.features && tool.features.some(f => f.toLowerCase().includes(query));
                    return matchLabel || matchDesc || matchFeatures;
                }
                
                return true;
            });
        }

        function initTabs() {
            tabsEl.innerHTML = '';
            const filteredTools = getFilteredTools();
            
            if (filteredTools.length === 0) {
                tabsEl.innerHTML = '<div style="padding: 20px; text-align: center; color: #6b7280;">æœªæ‰¾åˆ°åŒ¹é…çš„å·¥å…·</div>';
                return;
            }

            // åˆ†ç»„æ¸²æŸ“ï¼šæœ¬åœ° / åœ¨çº¿ / èµ„æº
            const groups = [
                { title: 'æœ¬åœ°å·¥å…·', type: 'æœ¬åœ°', icon: 'ğŸ’»' },
                { title: 'åœ¨çº¿å·¥å…·', type: 'åœ¨çº¿', icon: 'ğŸŒ' },
                { title: 'èµ„æºæ–‡ä»¶', type: 'èµ„æº', icon: 'ğŸ“' }
            ];

            let visualIndex = 0;

            groups.forEach(group => {
                const groupTools = filteredTools.filter(t => t.type === group.type);
                if (groupTools.length === 0) return;

                const wrapper = document.createElement('div');
                const title = document.createElement('div');
                title.className = 'tab-section-title';
                title.innerHTML = `<span class="icon">${group.icon}</span>${group.title} (${groupTools.length})`;
                const section = document.createElement('div');
                section.className = 'tab-section';

                groupTools.forEach((tool) => {
                    const toolIndex = tools.indexOf(tool);
                    const tab = document.createElement('div');
                    tab.className = `tab ${group.type === 'æœ¬åœ°' ? 'local' : group.type === 'åœ¨çº¿' ? 'online' : 'resource'}`;
                    tab.setAttribute('data-index', String(toolIndex));
                    
                    // å›¾æ ‡
                    if (tool.icon) {
                        const iconSpan = document.createElement('span');
                        iconSpan.textContent = tool.icon;
                        iconSpan.style.fontSize = '16px';
                        tab.appendChild(iconSpan);
                    }
                    
                    // åç§°
                    const name = document.createElement('span');
                    name.textContent = tool.label;
                    tab.appendChild(name);
                    
                    // å¾½ç« 
                    const badge = document.createElement('span');
                    badge.className = 'badge';
                    badge.textContent = tool.type || 'å·¥å…·';
                    tab.appendChild(badge);
                    
                    // ä¿¡æ¯æŒ‰é’®
                    const info = document.createElement('span');
                    info.className = 'info-dot';
                    info.textContent = 'i';
                    info.title = 'æŸ¥çœ‹ä½¿ç”¨æŒ‡å—';
                    info.addEventListener('click', (e) => { e.stopPropagation(); openGuide(toolIndex); });
                    tab.appendChild(info);
                    
                    tab.title = tool.file ? tool.file : (tool.url || '');
                    tab.addEventListener('click', () => setActive(toolIndex));
                    
                    section.appendChild(tab);
                    visualIndex++;
                });

                    wrapper.appendChild(title);
                    wrapper.appendChild(section);
                    tabsEl.appendChild(wrapper);
            });

            // å¦‚æœæœ‰Hashï¼Œå°è¯•æ¿€æ´»å¯¹åº”å·¥å…·
            const hashIndex = (() => {
                const h = window.location.hash.replace('#', '').trim();
                const n = parseInt(h, 10);
                if (!isNaN(n) && n >= 1 && n <= tools.length) return n - 1;
                return 0;
            })();
            
            // æ£€æŸ¥å½“å‰æ¿€æ´»çš„å·¥å…·æ˜¯å¦åœ¨è¿‡æ»¤ç»“æœä¸­
            if (filteredTools.includes(tools[currentIndex])) {
                setActive(currentIndex);
            } else if (filteredTools.length > 0) {
                setActive(tools.indexOf(filteredTools[0]));
            }
        }

        function setupKeyboardNav() {
            document.addEventListener('keydown', (e) => {
                if (e.key === '?' || (e.ctrlKey && e.key === '/')) {
                    const visible = guideMask.getAttribute('aria-hidden') === 'false';
                    if (visible) closeGuide(); else openGuide(currentIndex);
                    return;
                }
                if (e.altKey || e.metaKey || e.shiftKey || e.ctrlKey) return;
                if (e.key !== 'ArrowLeft' && e.key !== 'ArrowRight') return;
                const tabs = Array.from(document.querySelectorAll('.tab[data-index]'));
                const activeIndex = tabs.findIndex(t => t.classList.contains('active'));
                if (activeIndex < 0) return;
                let next = e.key === 'ArrowRight' ? activeIndex + 1 : activeIndex - 1;
                const total = tabs.length;
                if (next < 0) next = total - 1;
                if (next >= total) next = 0;
                setActive(next);
                window.location.hash = String(next + 1);
            });
        }

        guideMask.addEventListener('click', (e) => { if (e.target === guideMask) closeGuide(); });
        closeGuideBtn.addEventListener('click', closeGuide);

        // æœç´¢åŠŸèƒ½
        searchInput.addEventListener('input', (e) => {
            searchQuery = e.target.value.trim();
            initTabs();
        });

        // ç­›é€‰åŠŸèƒ½
        filterBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                filterBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentFilter = btn.getAttribute('data-filter');
                initTabs();
            });
        });

        initTabs();
        setupKeyboardNav();
    </script>
</body>
</html>


